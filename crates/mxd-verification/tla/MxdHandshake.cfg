\* TLC configuration for MxdHandshake.tla
\* Run with: tlc -config MxdHandshake.cfg MxdHandshake.tla

SPECIFICATION Spec

\* Model bounds: keep state space tractable (~10^6 states)
\* MaxClients = 3 exercises concurrency; TimeoutTicks = 5 matches protocol
CONSTANTS
    MaxClients = 3
    TimeoutTicks = 5
    Idle = "Idle"
    AwaitingHandshake = "AwaitingHandshake"
    Validating = "Validating"
    Ready = "Ready"
    Error = "Error"
    HANDSHAKE_OK = 0
    HANDSHAKE_ERR_INVALID = 1
    HANDSHAKE_ERR_UNSUPPORTED_VERSION = 2
    HANDSHAKE_ERR_TIMEOUT = 3

\* All invariants must hold in every reachable state
INVARIANTS
    TypeInvariant
    TimeoutInvariant
    ErrorCodeInvariant
    ReadinessInvariant
    NoReadyWithError
