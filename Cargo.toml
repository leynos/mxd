[package]
name = "mxd"
version = "0.1.0"
edition = "2024"

[lib]
path = "src/lib.rs"

[dependencies]
tokio = { version = "1", features = ["full"] }
diesel = { version = "2", features = ["chrono"] }
diesel-async = { version = "0.5", features = ["bb8", "sync-connection-wrapper"] }
diesel_migrations = "2"
thiserror = "1"
serde = { version = "1", features = ["derive"] }
serde_json = "1"
clap = { version = "4", features = ["derive"] }
argon2 = { version = "0.5", features = ["std"] }
rand = "0.8"

[features]
default = ["sqlite"]
postgres = ["diesel/postgres", "diesel-async/postgres", "diesel_migrations/postgres"]
sqlite = ["diesel/sqlite", "diesel-async/sqlite", "diesel_migrations/sqlite"]

[dev-dependencies]
test-util = { path = "test-util" }

[target.'cfg(feature = "postgres")'.dev-dependencies]
pg-embed = "0.7"
